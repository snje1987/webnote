<{use Org\Snje\Minifw as FW}>
<{use Org\Snje\Webnote as WN}>
<{inc header}>
<div class="container-fluid">
    <{$bookname=$args->get_book_name()}>
    <{$cur_page=$args->get_cur_page()}>
    <ol class="breadcrumb breadcrumb">
        <button type="button" class="btn btn-default btn-xs" data-toggle="modal" data-target="#systemMenu"><span class="glyphicon glyphicon-cog"></span></button>
        &nbsp;&nbsp;
        <li><a href="/">返回</a></li>
    </ol>
</div>
<div class="modal fade bs-example-modal-lg" id="systemMenu" tabindex="-1" role="dialog" aria-labelledby="systemMenuLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="systemMenuLabel">选择您要进行的操作</h4>
            </div>
            <div class="modal-body">
                <ul class="list-group">
                    <li class="list-group-item list-group-item-text"><a class="ajax" href="/system/clearcache">清空缓存</a></li>
                    <li class="list-group-item list-group-item-text"><a href="/system/chpwd">修改访问密码</a></li>
                    <li class="list-group-item list-group-item-text"><a class="ajax" href="/system/logout">退出登陆</a></li>
                </ul>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<div class="container-fluid">
    <table class="table table-bordered table-hover table-condensed table-striped">
        <tr>
            <th>时间</th>
            <th>HASH</th>
            <th>说明</th>
        </tr>
        <{foreach $data $commit}>
        <tr>
            <td><{=$commit->getDate()->format('Y-m-d H:i:s')}></td>
            <td><a href="/book/diff/<{=$commit->getHash()}>/<{=$book_name}>/<{=$page_path}>"><{=$commit->getHash()}></a></td>
            <td><{=$commit->getMessage()}></td>
        </tr>
        <{/foreach}>
    </table>
    <nav aria-label="...">
        <ul class="pager">
            <{if $page <= 1}>
            <li class="disabled"><a href="javascript:void(0);">上一页</a></li>
            <{else}>
            <li><a href="/book/history/<{=$page-1}>/<{=$book_name}>/<{=$page_path}>">上一页</a></li>
            <{/if}>
            <{if $page >= $max_page}>
            <li class="disabled"><a href="javascript:void(0);">下一页</a></li>
            <{else}>
            <li><a href="/book/history/<{=$page+1}>/<{=$book_name}>/<{=$page_path}>">下一页</a></li>
            <{/if}>

        </ul>
    </nav>
</div>
<{inc footer}>